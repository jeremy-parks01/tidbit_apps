load("render.star", "render")
load("http.star", "http")
load("encoding/base64.star", "base64")
load("time.star", "time")
load("encoding/json.star", "json")

stationId = "9437540"
today = time.now().format("20060102")

NOAA_TIDES_URL = "https://api.tidesandcurrents.noaa.gov/api/prod/datagetter?product=predictions&application=NOS.COOPS.TAC.WL&begin_date=%s&end_date=%s&datum=MLLW&station=%s&time_zone=lst_ldt&units=english&interval=hilo&format=json" % (today,today,stationId)
WAVE_ICON = base64.decode("""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""")

def main(config): 
    print("%d Calling NOAA API" % time.now() )
    resp = http.get(NOAA_TIDES_URL)
    if resp.status_code != 200:
        fail("NOAA request failed with status %d", resp.status_code)
    tides = json.decode(resp.body())
    
    events = tides["predictions"] 
    time_0 = time.parse_time(events[0]["t"], format = "2006-01-02 15:04").format("15:04")
    time_1 = time.parse_time(events[1]["t"], format = "2006-01-02 15:04").format("15:04")
    time_2 = time.parse_time(events[2]["t"], format = "2006-01-02 15:04").format("15:04")
    
    high_low_0 = events[0]["type"]
    high_low_1 = events[1]["type"]		
    high_low_2 = events[2]["type"]
    
    x = len(events)
    if x >= 4:
        time_3 = time.parse_time(events[3]["t"], format = "2006-01-02 15:04").format("15:04")
        high_low_3 = events[3]["type"]
    else:
	time_3 = ""
        high_low_3 = ""

    return render.Root(
        child = render.Row(
            expanded=True,
            main_align="space_between",
            cross_align="end",
            children = [
                render.Column(
                    children=[   
			render.Box(width = 32, height = 16 , child = render.Image(src=WAVE_ICON,width = 32, height = 16,)),                  
                        render.Box(width = 32, height = 16 , child = render.WrappedText(content="%d/%d PC TIDES" % (time.now().month,time.now().day), width=32, height=16, color="#FFF",)),
                    ],
                ),

                render.Column(
                    children=[
                        render.Box(width = 32, height = 8 , child = render.Text(content = "%s %s" % (high_low_0,time_0), color = "#14F")),
                        render.Box(width = 32, height = 8 , child = render.Text(content = "%s %s" % (high_low_1,time_1), color = "#1AF")),
                        render.Box(width = 32, height = 8 , child = render.Text(content = "%s %s" % (high_low_2,time_2), color = "#14F")),
			render.Box(width = 32, height = 8 , child = render.Text(content = "%s %s" % (high_low_3,time_3), color = "#1AF")),
                    ],
                ),
            ]
         )
     )

